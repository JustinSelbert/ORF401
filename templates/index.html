{% extends "base.html" %}

{% block content %}
<section class="hero-panel">
  <div class="hero-content">
    <p class="eyebrow">SparkRides Matchmaking</p>
    <h1 class="hero-title">Ridesharing built for route fit and social compatibility.</h1>
    <p class="hero-copy">
      SparkRides helps riders form better carpools by combining destination overlap with optional social signals from Spotify,
      Instagram, and other linked platforms. It is the ride experience of Uber and Lyft with stronger carpool chemistry.
    </p>
    <div class="hero-cta-row">
      <a class="cta-link" href="{% url 'rides:index' %}">Search Carpools</a>
      <a class="secondary-link" href="{% url 'rides:map' %}">View Route Map</a>
    </div>
  </div>

  <div class="hero-stats">
    <article class="stat-card">
      <p class="stat-value">{{ stat_total_rides }}</p>
      <p class="stat-label">active rides in network</p>
    </article>
    <article class="stat-card">
      <p class="stat-value">{{ stat_open_rides }}</p>
      <p class="stat-label">rides currently taking passengers</p>
    </article>
    <article class="stat-card">
      <p class="stat-value">{{ stat_open_seats }}</p>
      <p class="stat-label">open seats in total inventory</p>
    </article>
  </div>
</section>

<section class="feature-grid">
  <article class="feature-card">
    <h3>Route + Vibe Matching</h3>
    <p>Find carpools where timing and destination align, then rank riders by compatibility signals and comfort preferences.</p>
  </article>
  <article class="feature-card">
    <h3>Linked Social Signals</h3>
    <p>Connect Spotify, Instagram, and more to improve ride pairing confidence before pickup.</p>
  </article>
  <article class="feature-card">
    <h3>Safety + Transparency</h3>
    <p>Preview rider profile context, linked account status, and seat availability before booking.</p>
  </article>
</section>

<section class="partner-section">
  <div class="section-heading">
    <p class="eyebrow">Connected Platforms</p>
    <h2>Powered by optional social integrations.</h2>
    <p>
      SparkRides enriches carpool matching with social context while keeping riders in control of what gets shared.
    </p>
  </div>
  <div class="partner-grid">
    <article class="partner-card">
      <img src="/static/partners/spotify.svg" alt="Spotify partner logo">
      <h3>Spotify</h3>
      <p>Tune compatibility around favorite artists, genres, and listening habits.</p>
    </article>
    <article class="partner-card">
      <img src="/static/partners/instagram.svg" alt="Instagram partner logo">
      <h3>Instagram</h3>
      <p>Use optional lifestyle tags to improve trip partner matching.</p>
    </article>
    <article class="partner-card">
      <img src="/static/partners/facebook.svg" alt="Facebook partner logo">
      <h3>Facebook</h3>
      <p>Enable demographic and community-aware recommendation logic.</p>
    </article>
    <article class="partner-card">
      <img src="/static/partners/youtube.svg" alt="YouTube partner logo">
      <h3>YouTube Music</h3>
      <p>Supplement music profile matching for long-distance rides.</p>
    </article>
  </div>
</section>

<section class="map-section">
  <div class="map-card">
    <img src="/static/maps/spark-city-map.svg" alt="Stylized SparkRides city map with route paths">
  </div>
  <div class="map-copy">
    <p class="eyebrow">Live Corridor Insights</p>
    <h2>Map intelligence for better shared rides.</h2>
    <p>
      Browse demand corridors, pickup hotspots, and seat supply before booking. Use the full map page to drill into route clusters.
    </p>
    <ul class="map-list">
      <li>Corridor-level demand signals for smarter departure timing</li>
      <li>Pickup cluster analysis by neighborhood and city</li>
      <li>Compatibility overlays tied to rider preferences</li>
    </ul>
    <a class="inline-link" href="{% url 'rides:map' %}">Open full map and corridor detail</a>
  </div>
</section>

<section class="info-grid">
  <article class="info-card">
    <p class="info-step">01</p>
    <h3>Create Your Profile</h3>
    <p>Set social links, ride comfort defaults, and carpool priorities from your profile page.</p>
  </article>
  <article class="info-card">
    <p class="info-step">02</p>
    <h3>Search and Compare</h3>
    <p>Filter by city, state, date, and available seats to find practical matches quickly.</p>
  </article>
  <article class="info-card">
    <p class="info-step">03</p>
    <h3>Book with Context</h3>
    <p>Review match quality and availability before choosing your preferred carpool partner.</p>
  </article>
</section>

<section class="split-panel">
  <article class="split-card">
    <p class="eyebrow">Featured Matches</p>
    <h3>Suggested carpools available now</h3>
    <div class="mini-list">
      {% for match in featured_matches %}
      <div class="mini-item">
        <div>
          <strong>{{ match.rider.first_name }}</strong>
          <p>{{ match.rider.origination }} to {{ match.rider.destination_city }}, {{ match.rider.destination_state }}</p>
        </div>
        <span class="pill pill-yes">{{ match.compatibility }}</span>
      </div>
      {% empty %}
      <p class="empty-state">No open rides are currently listed.</p>
      {% endfor %}
    </div>
  </article>

  <article class="split-card">
    <p class="eyebrow">Popular Destinations</p>
    <h3>Where riders are headed most</h3>
    <div class="destination-list">
      {% for destination in popular_destinations %}
      <div class="destination-row">
        <span>{{ destination.destination_city }}, {{ destination.destination_state }}</span>
        <strong>{{ destination.total }} rides</strong>
      </div>
      {% empty %}
      <p class="empty-state">No destination data yet.</p>
      {% endfor %}
    </div>
    <a class="inline-link" href="{% url 'rides:index' %}">Search all rides</a>
  </article>
</section>

<section class="upcoming-section">
  <div class="section-heading">
    <p class="eyebrow">Upcoming Departures</p>
    <h2>Next rides in your network.</h2>
  </div>
  <div class="upcoming-grid">
    {% for ride in upcoming_preview %}
    <article class="upcoming-card">
      <h3>{{ ride.first_name }}</h3>
      <p>{{ ride.origination }} to {{ ride.destination_city }}, {{ ride.destination_state }}</p>
      <p>{{ ride.date }} at {{ ride.time }}</p>
      {% if ride.taking_passengers %}
      <span class="pill pill-yes">{{ ride.seats_available }} seats open</span>
      {% else %}
      <span class="pill pill-no">Driver only</span>
      {% endif %}
    </article>
    {% empty %}
    <p class="empty-state">No scheduled departures available.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
